<script>
  try {
    const stored = localStorage.getItem("data-mode");
    const prefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)",
    ).matches;
    const mode = stored || (prefersDark ? "dark" : "light");
    document.documentElement.setAttribute("data-mode", mode);
    if (!stored) {
      localStorage.setItem("data-mode", mode);
    }
  } catch (_) {}
</script>
